package com.blueoxfords;

import com.blueoxfords.models.KeywordPairing;
import com.blueoxfords.models.VolunteerOpening;
import com.google.gson.Gson;
import com.google.gson.GsonBuilder;

import org.junit.Test;

import java.util.ArrayList;
import java.util.List;

public class KeywordGeneratorTest {


    public static final String[] SAMPLE_VOLUNTEER_OPENINGS = {
        "{\"title\":\"Community Organizing and Development Volunteer\",\"req_id\":\"3318br\",\"country\":\"elsalvador\",\"region\":\"centralamerica\",\"sector\":\"Community Economic Development\",\"apply_date\":\"2015-07-01\",\"know_date\":\"2015-09-01\",\"staging_start_date\":\"2016-03-30\",\"featured\":false,\"project_description\":\"As a Community Organization and Economic Development Community Services(COED) Volunteer in El Salvador, you will work in a rural community with local development groups to promote citizen participation in local development projects. The purpose of the Community Organization and Economic Development Project is that Salvadoran communities will enhance their quality of life through stronger organizational skills and business practices. As a Volunteer you will help to create and/or to strengthen functioning community organizations with legal status and a functioning directorate, including youth and women’s groups, for trainings on planning, leadership, management, teamwork, conflict resolution, et cetera. You will assist the community to better the quality of life in their communities by increasing citizen participation and community advocacy as well as promoting sustainable economic development. \\n\\nCOED Volunteers design their work around the two (2) specific project goals: 1) facilitate active and effective participation of individuals in local society and community development; and 2) assist community members in cultivating new economic opportunities that benefit themselves and their communities.\",\"required_skills\":\"Competitive candidates will meet or exceed the following criteria:\\nDemonstrated ability in planning, organizing, counseling on leadership within the past 5 years, AND one of the following:\\n• BA/BS in Social Work, Social Services, Counseling or Community Development; or\\n• BA/BS in any discipline with significant (3 months, 10 hours/month or 30 hours minimum) relevant volunteer experience.\",\"desired_skills\":\"Peace Corps/El Salvador has identified additional skills and experience that have shown to be valuable for service as a Community Services Volunteer: \\n• Participation and Outreach Experience with Community Organizations: Volunteers should be willing to help organize, work with, and liaise between local community groups and outside institutions and coordinate efforts with local NGOs, government agencies, and other institutions.\\n• Overseas Experience: Candidates should have at least 12 consecutive weeks of experience living, working, studying, and/or volunteering abroad.\\n• Professional Experience and/or Graduate Education: Candidates should have some combination of professional experience and/or graduate education as follows:\\n(1) Two (2) years of accumulated professional experience (20+ hours per week at any job or series of jobs) during and/or after college (does not need to be consecutive and can include a combination of work and volunteer experience);\\n(2) Two (2) years of graduate school or successful completion of a graduate degree; \\n(3) Some combination of (1) and (2); or\\n(4) Current enrollment in a Master’s International program.\",\"language_skills\":\"spanish\",\"language_skills_comments\":\"To apply to serve as a Volunteer in El Salvador, you are required to have some basic level of Spanish prior to arrival in country. Intermediate to advanced speakers of Spanish are preferred; however, applicants with lower levels who are actively engaged in Spanish language learning may be accepted. \\n\\nAlmost all of your work as a Volunteer will be conducted in Spanish, and you will communicate with your host family, fellow community members, and government and nongovernmental organizations (NGO) representatives in Spanish; therefore, all Volunteers must demonstrate at least intermediate level written and oral proficiency in Spanish prior to the completion of the 10-week Pre-Service Training.\",\"volunteers_requested\":10,\"accepts_couples\":true,\"living_conditions_comments\":\"As a Volunteer in El Salvador, you will live and work in a small rural community. Most sites are mountainous or very hilly, and temperatures in your site will likely range from very warm to hot, with a wet season from May to October and a dry season from November to April. You will generally have access to electricity and cell phone signal (of varying strength), but you may not have regular access to running water. It is very unlikely that you will have internet access in your site, but cyber cafes are usually only an hour or two away in nearby cities and towns. All COED Volunteers have access to regular public transportation in their immediate area, but the frequency of public transportation can vary greatly (from buses every 30 minutes to buses only on certain days of the week). Currently travel to the capital is highly restricted, but Peace Corps operates a shuttle system for travel to other parts of the country. \\n\\nYou will live with a host family throughout your 27 months of service. Host family housing can vary from basic adobe (clay) structures with outdoor latrines to brick or cement block homes with metal roofs and indoor toilets. At a minimum, you will have a private room within your host family’s home. As part of a local family, you are more likely pick up the local accent and learn local slang, you will assimilate into the community more quickly, and you will enjoy a safer and more secure volunteer experience. Volunteers in El Salvador generally agree that living with host families enriches their experience and helps you understand and participate more directly in the lifestyle and culture of rural Salvadoran families. \\n\\nMany Volunteers also eat their meals with their host families. In that case, a Volunteer’s diet generally mirrors his or her host family’s diet: corn tortillas, rice, beans, cheese, eggs, and coffee, with a limited selection of meat and seasonal fruits and vegetables. Some Volunteers cook meals for themselves and there is a wider variety of products available in larger cities and towns, but many volunteers quickly learn to love the local diet. \\n\\nMindful of cultural norms, some previous Lesbian, Gay, Bisexual, Transgender, Queer or Questioning, and Asexual (LGBTQA) Volunteers have chosen to be discreet about their sexual orientation and/or gender identity within their host communities.\",\"country_medical_considerations\":\"<ul style=\\\"color:#685745; font-size:.875em; margin-top:0;\\\">\\r\\n <li>\\r\\n Volunteers whose long-term health is maintained with access to care or services related to any of the following conditions or sub-specialties may not be able to serve: hematology. \\r\\n </li>\\r\\n <li>\\r\\n The following medication(s) are not permitted for legal, cultural or religious reasons: none identified.\\r\\n </li>\\r\\n <li>\\r\\n Volunteers who should avoid the following food(s) may not be able to serve: shellfish.\\r\\n </li>\\r\\n</ul>\\r\\n\\r\\n\",\"country_site_url\":\"http://elsalvador.peacecorps.gov\",\"country_flag_image\":\"http://files.peacecorps.gov/uploads/countries/flags/El_Salvador.gif\",\"opening_url\":\"http://www.peacecorps.gov/openings/3318br/\"}",
        "{\"title\":\"Linking Income, Food and the Environment- Forestry Specialist\",\"req_id\":\"3274br\",\"country\":\"zambia\",\"region\":\"africa\",\"sector\":\"Environment\",\"apply_date\":\"2015-07-01\",\"know_date\":\"2015-09-01\",\"staging_start_date\":\"2016-02-08\",\"featured\":false,\"project_description\":\"The LIFE project operates under invitation by, and in collaboration with, the Zambian Forestry Department under Zambia’s Ministry of Lands, Natural Resources and Environmental Protection. The project focuses on empowering rural community members to improve their food security in ways that conserve natural resources. The Volunteers working as Forest Extension agents are promoting the incorporation of agroforestry technologies, soil and water management practices, as well as improved gardening techniques in the farming system. Classic Peace Corps Volunteer projects consist of working with community groups, schools, and clubs to address threats to forests and their ecosystems. Volunteers work with communities by teaching alternatives to unsustainable forest exploitation such as conservation farming, agroforestry, soil and water conservation, and improved gardening. For farmers who are interested in scaling up their activities, Volunteers also provide training in basic business skills such as planning, record keeping, and marketing.\",\"required_skills\":\"Competitive candidates will meet or exceed the following criteria:\\n• BA/BS in any discipline plus work experience in forestry or nursery management; or\\n• Bachelor’s/Associate’s degree in Forestry or Watershed Management; or\\n• Bachelor’s/Associate’s degree in Natural Resources, Environmental Science or Ecology; or\\n• BS in Biology, Botany, Ornamental Horticulture or Geology; with growing experience or field work (nursery, greenhouse, gardening or farming).\",\"desired_skills\":\"Prior experience with any of the following would be of benefit to the work of a Forestry Volunteer: establishing and maintaining soil and water conservation structures and practices, fruit tree production, live fences, and other agriculture-related forestry practices; fish cultivation; raising trees in small nurseries; apiculture and honey production; livestock health; meat and wool production; range management; vegetable gardening; and nutrition education\",\"language_skills\":\"none\",\"language_skills_comments\":\"The official langue of Zambia is English. However, Volunteers will be trained in and will use the local language of his or her site. While some community members may have intermediate or advanced levels of English, most will not. Therefore, Volunteers will be most effective when conversing and working in the local language.\",\"volunteers_requested\":5,\"accepts_couples\":true,\"living_conditions_comments\":\"Those interested in becoming a Forestry Volunteer in Zambia must be prepared for long biking (up to 20 km in one direction) and working and living in rural Zambian villages. In addition, this position requires commitment to working in remote areas with challenging environs. Housing will be mud huts with thatched roofs and no electricity. Water will be from a nearby well or stream and all Volunteers are given a Peace Corps-issued water filter. Cell phone coverage may not exist at site but all Volunteers report having cell phone coverage nearby. Volunteers are supported in this uniquely rural environment through a Provincial House model, a Peace Corps Zambia policy essential to supporting its Volunteers. These regional offices are staffed year-round which helps ensure constant Volunteer support.\",\"country_medical_considerations\":\"<ul style=\\\"color:#685745; font-size:.875em; margin-top:0;\\\">\\r\\n <li>\\r\\n Volunteers whose long-term health is maintained with access to care or services related to any of the following conditions or sub-specialties may not be able to serve: asthma; cardiology; dermatology; gastroenterology; urology; some types of gynecologic support; mammography; ophthalmology; ongoing behavioral health support; hematology; seizure disorder. \\r\\n </li>\\r\\n <li>\\r\\n The following medication(s) are not permitted for legal, cultural or religious reasons: Adderall and Ritalin. \\r\\n <li>\\r\\n Volunteers who should avoid the following food(s) may not be able to serve: eggs, peanuts and gluten. \\r\\n </li>\\r\\n</ul>\\r\\n\",\"country_site_url\":\"http://zambia.peacecorps.gov\",\"country_flag_image\":\"http://files.peacecorps.gov/uploads/countries/flags/Zambia.gif\",\"opening_url\":\"http://www.peacecorps.gov/openings/3274br/\"}",
        "{\"title\":\"Entrepreneurship Education Specialist\",\"req_id\":\"3303br\",\"country\":\"nicaragua\",\"region\":\"centralamerica\",\"sector\":\"Community Economic Development\",\"apply_date\":\"2015-07-01\",\"know_date\":\"2015-09-01\",\"staging_start_date\":\"2016-03-01\",\"featured\":false,\"project_description\":\"Entrepreneurship Education Volunteers are trained and assigned to co-teach an entrepreneurship education course in public high schools in coordination with the Ministry of Education (MINED). A vital part of this assignment is training the entrepreneurship teachers in the course material. Volunteers will train and advise entrepreneurs and managers in business planning, marketing, financial management and product design; they also advise agricultural cooperatives, agribusinesses, and farmers, develop and write project funding proposals and work with community and business support groups. Other projects volunteers work in include assisting with credit programs, facilitating business training workshops, and teaching business courses, English, and Junior Achievement programs. This is to ensure that the impact we make does not only reach the current students that you will be working with, but also the generations to come. \\n\\nAll Entrepreneurship Education Volunteers are also expected to conduct training on personal money management in order to assist community members in developing the capacity to meet their personal financial goals. Furthermore, Volunteers will be encouraged to work with their community to organize a career and/or college fair in their sites to increase opportunity awareness amongst youth.\\n\\nPeace Corps/Nicaragua also collaborates with other non-governmental organizations (NGOs) and community groups to reach out of school youth. Recognizing that small businesses form an integral part of the nation’s economy and in light of globalization and various trade agreements, the Entrepreneurship Education Project will continue helping interested micro-business owners and entrepreneurs to improve productivity and competitiveness. We do this by motivating, inspiring, and assisting them in the development of their business plans as well as the application of sound business planning and management techniques. The project will provide current and prospective small business owners and entrepreneurs the knowledge and skills needed to take advantage of economic opportunities, secure employment, and/or generate income. The focus of the volunteer’s work will be transmitting knowledge and developing the abilities and skills of business people, and community groups wishing to improve their quality of life through the promotion of sustainable economic activities.\",\"required_skills\":\"Competitive candidates will meet or exceed the following criteria:\\n• MBA, MA/MS in Business Administration, Public Administration, Management, Accounting, Banking or Finance; or\\n• BA/BS in Business Administration, Management, Accounting, Banking, Finance or Public Administration plus business related experience; or\\n• BA/BS in any discipline and full-time business related experience.\",\"desired_skills\":\"Volunteers must have the ability to co-plan and co-teach an entrepreneurship course with Nicaraguan teachers who have no prior business training. A minimum of 12 months work experience planning and/or managing a business is preferred. Previous experience with Junior Achievement in high school or college is also preferred. \\n\\nAbility to identify and establish relationships with local business owners and provide technical assistance and business development training. Themes covered through the course, technical assistance, and training are very basic, such as the use of cash flow statements, establishing costs and pricing, inventory systems, etc.\\n\\nDepending on their Spanish level, as Entrepreneurship Education Volunteers will more likely be assigned to work with a departmental school superintendent to design, coordinate and facilitate monthly teachers’ workshops. Furthermore, these Volunteers will be assigned to work with a government, non-government, or community group to provide technical assistance and business training to their clients, and/or strengthen their partner’s ability to render better services to their clients. Peace Corps/Nicaragua prefers that these individuals have demonstrated skills and non-formal education experience. Work experience designing and delivering trainings on business development and planning themes, as well as organizational development skills are strongly preferred. \\n\\nVolunteers must have interest in co-planning and co-teaching an entrepreneurship course with Nicaraguan teachers who have no prior business training. \\nCompetitive candidates will have:\\n•12 months of experience planning and/or managing a business. \\n•Working with government, non-government, or community groups.\\n•Previous experience with Junior Achievement in high school or college. \\n•Ability to identify and establish relationships with local business owners and provide technical assistance and business development training in topics such as the use of cash flow statements, establishing costs and pricing, inventory systems, etc.\\n•Demonstrated competence to work in such unstructured and unpredictable environments.\",\"language_skills\":\"spanish\",\"language_skills_comments\":\"Spanish language skills are critical to teaching entrepreneurship education in crowded classrooms with 35-55 students with very poor acoustics. Spanish skills are also critical to have credibility with business owners, to be able to facilitate group meetings and teach business classes. Invitees must be actively learning Spanish prior to training to meet minimum language requirement to qualify for service.\\n\\nTo be placed under consideration for this program, candidates must match one of the following language qualifications:\\n•Be a native/bilingual speaker of Spanish. \\n•Have completed college-level Spanish Intermediate II (e.g., SPAN 202) within the past 6 years \\n•Scored 4 or better on the high school Spanish Advanced Placement (AP) Exam within the past 8 years \\n•Scored 5 on the high school Spanish International Baccalaureate Assessment within the past 8 years \\n•Completed college-level Spanish Elementary II (e.g., SPAN 102) within the past 6 years \\n•Completed 4 years of high school Spanish coursework within the past 8 years \\n•Scored 50 or higher on the Spanish College Level Examination Program (CLEP) exam in the past 6 years \\n•Scored at Novice-High or greater on official American Council on the Teaching of Foreign Languages (ACTFL) Oral Proficiency Interview (OPI) within the past 6 years.\",\"volunteers_requested\":4,\"accepts_couples\":true,\"living_conditions_comments\":\"Most as Entrepreneurship Education Volunteers work in large and medium size towns (15,000 + people) and are requested to commute to smaller rural communities to co-teach and/or co-conduct training sessions. Therefore volunteers must be willing to live in areas with limited resources.\\n\\nCouples will be separated during Pre-Service Training to aid in language and cultural acquisition. \\n\\nThe majority of sites have extreme heat/humidity. Electricity outages and water shortages often occur daily. A significant number of sites have extremely hot temperatures (100+) with high humidity during the rainy season and very dry, dusty conditions during the dry season. \\n\\nMost Volunteers will have to commute by bus or local transportation to a nearby rural community to teach the entrepreneurship course at a local high school. Physical ability to walk, take public transportation to neighboring communities to work in three (3) plus assigned schools. All Nicaragua Volunteers must live with home-stay families for the duration of the 27-month service in order to maximize community integration and a safe, productive service. Volunteers can find this very rewarding but applicants should evaluate their commitment and ability to be flexible and adaptable given this Post requirement.\",\"country_medical_considerations\":\"<ul style=\\\"color:#685745; font-size:.875em; margin-top:0;\\\">\\r\\n <li>\\r\\n Volunteers whose long-term health is maintained with access to care or services related to any of the following conditions or sub-specialties may not be able to serve: ongoing behavioral health support; hematology. \\r\\n </li>\\r\\n <li>\\r\\n The following medication(s) are not permitted for legal, cultural or religious reasons: none identified. \\r\\n <li>\\r\\n Volunteers who should avoid the following food(s) may not be able to serve: none identified. \\r\\n </li>\\r\\n</ul>\",\"country_site_url\":\"http://nicaragua.peacecorps.gov\",\"country_flag_image\":\"http://files.peacecorps.gov/uploads/countries/flags/Nicaragua.gif\",\"opening_url\":\"http://www.peacecorps.gov/openings/3303br/\"}"
    };

    @Test
    public void testGenerate() throws Exception {
        Gson gson = new GsonBuilder()
                .setDateFormat("yyyy-MM-dd")
                .create();

        List<VolunteerOpening> openings = new ArrayList<>();
        for (String volunteerOpeningJson : SAMPLE_VOLUNTEER_OPENINGS) {
            openings.add(gson.fromJson(volunteerOpeningJson, VolunteerOpening.class));
        }
        List<KeywordPairing> pairings = KeywordGenerator.generate(openings);

        System.out.println(pairings);
    }

    public static final String[] SAMPLE_DESCRIPTIONS = {
            "As a Community Organization and Economic Development Community Services(COED) Volunteer in El Salvador, you will work in a rural community with local development groups to promote citizen participation in local development projects. The purpose of the Community Organization and Economic Development Project is that Salvadoran communities will enhance their quality of life through stronger organizational skills and business practices. As a Volunteer you will help to create and/or to strengthen functioning community organizations with legal status and a functioning directorate, including youth and women’s groups, for trainings on planning, leadership, management, teamwork, conflict resolution, et cetera. You will assist the community to better the quality of life in their communities by increasing citizen participation and community advocacy as well as promoting sustainable economic development. COED Volunteers design their work around the two (2) specific project goals: 1) facilitate active and effective participation of individuals in local society and community development; and 2) assist community members in cultivating new economic opportunities that benefit themselves and their communities.",
            "The LIFE project operates under invitation by, and in collaboration with, the Zambian Forestry Department under Zambia’s Ministry of Lands, Natural Resources and Environmental Protection. The project focuses on empowering rural community members to improve their food security in ways that conserve natural resources. The Volunteers working as Forest Extension agents are promoting the incorporation of agroforestry technologies, soil and water management practices, as well as improved gardening techniques in the farming system. Classic Peace Corps Volunteer projects consist of working with community groups, schools, and clubs to address threats to forests and their ecosystems. Volunteers work with communities by teaching alternatives to unsustainable forest exploitation such as conservation farming, agroforestry, soil and water conservation, and improved gardening. For farmers who are interested in scaling up their activities, Volunteers also provide training in basic business skills such as planning, record keeping, and marketing.",
            "Entrepreneurship Education Volunteers are trained and assigned to co-teach an entrepreneurship education course in public high schools in coordination with the Ministry of Education (MINED). A vital part of this assignment is training the entrepreneurship teachers in the course material. Volunteers will train and advise entrepreneurs and managers in business planning, marketing, financial management and product design; they also advise agricultural cooperatives, agribusinesses, and farmers, develop and write project funding proposals and work with community and business support groups. Other projects volunteers work in include assisting with credit programs, facilitating business training workshops, and teaching business courses, English, and Junior Achievement programs. This is to ensure that the impact we make does not only reach the current students that you will be working with, but also the generations to come. All Entrepreneurship Education Volunteers are also expected to conduct training on personal money management in order to assist community members in developing the capacity to meet their personal financial goals. Furthermore, Volunteers will be encouraged to work with their community to organize a career and/or college fair in their sites to increase opportunity awareness amongst youth. Peace Corps/Nicaragua also collaborates with other non-governmental organizations (NGOs) and community groups to reach out of school youth. Recognizing that small businesses form an integral part of the nation’s economy and in light of globalization and various trade agreements, the Entrepreneurship Education Project will continue helping interested micro-business owners and entrepreneurs to improve productivity and competitiveness. We do this by motivating, inspiring, and assisting them in the development of their business plans as well as the application of sound business planning and management techniques. The project will provide current and prospective small business owners and entrepreneurs the knowledge and skills needed to take advantage of economic opportunities, secure employment, and/or generate income. The focus of the volunteer’s work will be transmitting knowledge and developing the abilities and skills of business people, and community groups wishing to improve their quality of life through the promotion of sustainable economic activities."
    };

    @Test
    public void testDetermineKeywordFromText() throws Exception {
        for (String description : SAMPLE_DESCRIPTIONS) {
            System.out.println("generated keyword: " + KeywordGenerator.determineKeywordFromText(description));
        }
    }
}